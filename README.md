# VRCX Predictor 使用说明

面开发者的文档：[点击跳转](/DEVELOPER_GUIDE.md)

VRCX Predictor 是一个本地桌面工具：读取你电脑上的 `VRCX.sqlite3`（只读），把 VRChat 的 Online/Offline 记录做成统计与热力图，并给出“未来 2 小时上线概率”和“未来 24 小时最佳上线时间窗”。

> 隐私：不联网、不上传，只读取本地 SQLite 文件。

---

## 1. 准备工作

你需要：
- Windows 10/11
- 已安装并使用过 VRCX（本地存在数据库文件）
- 数据库文件通常在：
  - `%APPDATA%\VRCX\VRCX.sqlite3`

---

## 2. 快速开始

1) 打开程序后，在“数据源”区域：
- 点击【浏览】选择 `VRCX.sqlite3`
- 点击【刷新表】读取可用表

2) 选择：
- **表**：一般会是形如 `usr..._feed_online_offline` 的表
- **显示名称（display_name）**：可从下拉列表选择，或手动输入

3) 点击【开始分析】

---

## 3. 页面说明

左侧菜单：

### 3.1 仪表盘
- 数据源选择（数据库、表、显示名称）
- 参数设置（时区、解析模式、历史窗口、分桶粒度等）
- 核心结果卡片（当前状态、未来2小时概率、规律性、最佳上线时间窗）
- 会话/样本等辅助信息（平均间隔、近7天活跃时段、置信度）

### 3.2 热力图
有两个 Tab：
- **个人热力图**：一周 7 天 × 一天 24 小时（或更细粒度）的“在线概率矩阵”
- **全局热力图**：同一张表内所有 `Online` 事件的密度（归一化后 0..1）

右上通常可切换显示粒度：
- **按小时**（24列）
- **按分桶**（由 Bin 决定，比如 15 分钟就是 96 列）

### 3.3 会话列表
显示每一次上线会话：
- Start / End
- Duration（小时）
- IsOpen：如果最后一次记录是 Online 且还没有 Offline，则会话会显示为 Open（开放会话）

### 3.4 帮助
解释参数用途与建议（与“参数说明”相同）。

---

## 4. 参数说明（仪表盘 > 参数）

### 时间与解析
- **时区**：决定所有结果按哪个时区显示（热力图/窗口/会话时间都会受影响）。
- **记录时间（utc/local）**：决定如何解释 VRCX 表里的 `created_at` 字符串。
  - 若你发现所有时间整体偏移（例如差 8 小时），尝试切换该选项再分析。

### 模型参数
- **半衰期(天)**：越小越偏重近期行为，越大越偏重长期规律。
- **历史天数**：只使用最近 N 天数据参与分析。
- **Bin(分钟)**：时间分桶粒度（例如 15 分钟）。越小越细，但需要更多数据支撑。

###（可选）周末/工作日与节假日
界面提供：
- 周末/工作日分开
- 最近 N 周权重
- 节假日 / 调休工作日

> 注意：这些选项在当前版本 UI 中可配置并可保存，但是否参与计算取决于版本实现（见开发者文档的“配置传递注意点”）。

---

## 5. 结果字段定义（仪表盘）

- **当前状态**：根据最后一条事件是 Online/Offline 判定。
- **未来2小时**：未来 2 小时内“至少上线一次”的概率（0%~100%）。
- **规律性**：基于历史会话开始时间的离散程度给出的标签（极高 / 规律 / 随机 / 数据不足）。
- **最佳上线时间窗**：未来 24 小时内概率最高的时间点附近的一个小窗口（通常是一个 bin 的左右范围）。
- **平均间隔**：最近若干次会话开始时间之间的平均间隔（小时）。
- **近7天活跃时段**：最近 7 天内最常在线的几个小时段（按累计在线分钟数统计）。
- **样本与置信度**：样本量（会话数）与一个经验性的置信度标签。

---

## 6. 常见问题

### 找不到数据库
- 确认已安装并运行过 VRCX
- 通过【浏览】手动选中 `VRCX.sqlite3`

### 找不到表
- 点击【刷新表】
- 确认数据库是 VRCX 的主库，而不是其他 SQLite 文件

### 找不到显示名称
- 尽量从下拉列表选择
- 手动输入时注意大小写/空格（程序按 NOCASE 匹配，但必须“完全匹配”）

### 显示“数据不足”
- 会话数量过少时会降低/停止预测输出，只显示基础统计
- 增大“历史天数”，或等更多记录累积

### 时间整体偏移
- 切换“记录时间（utc/local）”
- 检查“时区”是否正确

---

## 7. 配置保存位置

点击【保存配置】后，会写入：
- `%APPDATA%\vrcx_predictor\config.json`

下次启动自动读取。
